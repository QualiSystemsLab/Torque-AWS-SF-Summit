spec_version: 2-preview
description: Robotshot microservices application deployed on K8S with Helm and RDS deployed with TF

inputs:
  # hostname:
  #   type: string
  #   display-style: normal
  #   default: "robot-shop"
  #   description: "Sub-domain of qualitest.click"
  
# values that starts with '{' for liquid template must be encosed with quotes so YAML won't consider them as dict
outputs:
  WebsiteUrl:
    value: 'robotshop-{{ sandboxid | downcase }}.testquali.click:8080'
  

grains:
  # helloTF:
  #   kind: terraform
  #   spec:
  #     source:
  #       store: autogen_repo_sandbox_3416a76b
  #       path: terraform/simple-tf-module
  #     host:
  #       cloud-account: aws
  #       compute-service: eks
  #     inputs:
  #       - test_input1: env-input-{{.inputs.input1}}
  #       - test_input2: env-id-{{sandboxId}}
  #     ouputs:
  #       - output1
  #       - output2

  helloHelm:
    kind: helm
    # depends-on: helloTF
    spec:
      source:
        store: Project-Pivot-Assets
        path: robotShop
      host:
        cloud-account: aws-presales
        compute-service: eks-demo
      # commands:
      #   - "dep up bitnami/node"

      inputs:
        - hostname: 'robotshop-{{ sandboxid | downcase }}'
        - redis.storageClassName: gp2        